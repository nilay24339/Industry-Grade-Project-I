// This Jenkinsfile defines a continuous integration pipeline for a Maven-based Java project.
pipeline {
    // Defines where the entire pipeline will execute. 'any' means Jenkins will use any available agent.
    agent any

    // The stages block contains a sequence of stages for the build process.
    stages {
        // 1. Code Checkout Stage: Fetches the source code from the specified Git repository.
        stage('Code Checkout') {
            steps {
                // Uses the 'git' step to clone the repository.
                git 'https://github.com/nilay24339/Industry-Grade-Project-I.git'
            }
        }

        // 2. Code Compile Stage: Compiles the Java source code using Maven.
        stage('Code Compile') {
            steps {
                // Executes the 'mvn compile' command using the 'sh' step (shell).
                sh 'mvn compile'
            }
        }

        // 3. Unit Test Stage: Executes all unit tests within the project.
        stage('Unit Test') {
            steps {
                // Executes the 'mvn test' command.
                sh 'mvn test'
            }
        }

        // 4. Code Packaging Stage: Creates the final build artifact (e.g., a JAR or WAR file).
        stage('Code packaging') {
            steps {
                // Executes the 'mvn package' command.
                sh 'mvn package'
            }
        }
    }
}